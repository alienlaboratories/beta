//
// Copyright 2017 Alien Labs.
//

@import (reference) '../resources/css/ref/mixin.less';
@import (reference) '../resources/css/ref/theme.less';

.ux-list {
  display: flex;
  flex-direction: column;

  > .ux-list-items {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    overflow-y: scroll;
  }

  .ux-list-editor {
    overflow: hidden;
  }

  .ux-list-editor-container {
    // Account for list scrollbar.
    padding-right: @ux-scrollbar-width;
  }

  // Default style (e.g., does not apply to cards).
  .ux-list-item {
    display: flex;
    flex-direction: row;
    align-items: center;

    margin: 0;

    padding: 0 @ux-list-padding;

    > .ux-text {
      .ux-text-overflow
    }

    > .ux-icon {
      margin-right: 4px;

      &:last-child {
        margin: 0;
      }
    }

    .ux-icons {
      margin-left: 4px;
    }
  }

  // Focus.
  // TODO(burdon): Hide buttons unless focus.
  // https://css-tricks.com/focus-within-pseudo-class
  // https://bugs.chromium.org/p/chromium/issues/detail?id=617371 (May 2017, v60)
  //noinspection CssInvalidPseudoSelector
  .ux-list-item:focus-within {
    background-color: yellow;
  }

  // Hovering.
  .ux-list-item {
    .ux-hover {
      display: none;
    }
    .ux-no-hover {
      display: block;
    }

    &:hover {
      .ux-hover {
        display: block;
      }
      .ux-no-hover {
        display: none;
      }
    }
  }

  // Highlight.
  &.ux-list-highlight {
    .ux-list-item:hover {
      background-color: @ux-list-highlight;
    }
  }

  //
  // Drag and Drop
  //

  .ux-drag-source {

    &.ux-dragging {
      display: none;
    }

    > .ux-debug {
      display: none;
      text-align: right;
    }
  }

  .ux-drop-target {

    .ux-drop-placeholder {
      height: 0;

      // Debug.
      // height: 20px;
      // background-color: lightblue;

      // Close quickly.
      //-webkit-transition: height 0s;
      //-moz-transition: height 0s;
      //transition: height 0s;

      > .ux-debug {
        display: none;
        text-align: left;
        color: blue;
      }
    }

    &.ux-active {

      // Height is set by DND from dragging element.
      .ux-drop-placeholder {
        background-color: @ux-list-drop-active-background;

        // Animate open.
        //-webkit-transition: height .2s;
        //-moz-transition: height .2s;
        //transition: height .2s;
      }
    }

    &.ux-last {
      display: flex;
      flex-direction: column;
      flex-grow: 1;

      .ux-drop-placeholder {
        display: flex;
        flex-grow: 1;

        // Show immediately.
        //-webkit-transition: height 0s !important;
        //-moz-transition: height 0s !important;
        //transition: height 0s !important;
      }
    }
  }
}
